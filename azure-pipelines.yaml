pool:
  vmImage: ubuntu-latest

trigger:
  - main

variables:
  DOCKER_CONNECTION: DockerHub

steps:
  - script: |
      echo "##vso[task.setvariable variable=IMAGE_TAG]$(date +%Y%B%d)"
    name: SetImageTag

  - task: Docker@2
    name: BuildAndPush
    inputs:
      command: buildAndPush
      addPipelineData: false
      containerRegistry: $(DOCKER_CONNECTION)
      repository: webonyx/azuredevops-toolbox
      tags: $(IMAGE_TAG)
